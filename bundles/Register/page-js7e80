$(()=>{window.initializeRegisterInfo=n=>{$("#birthday_input").datepicker({changeYear:!0,changeMonth:!0,dateFormat:"yy-mm-dd",yearRange:"-100:+0"});const r=document.querySelector("#copy_phone_button"),e=document.querySelector("#Phone");r&&(r.onclick=()=>{e.select(),document.execCommand("copy"),registerPopup({content:n.translations.copied})});const u=document.querySelectorAll(".password_input_trigger");u.length&&u.forEach(n=>{const t=n.parentNode.querySelector("input[type=password]");n.onclick=()=>{if(t.type==="password"){t.type="text";return}t.type="password"}});const o=document.querySelectorAll(".form_subcategory");o.forEach(n=>{n.childElementCount<1&&(n.parentNode.style.display="none")});const t=document.querySelector("#selected_bank_select");if(t&&t.required!==!0){const n=document.querySelector("#bank_account_name_input"),i=document.querySelector("#bank_account_number_input");t.onchange=()=>{n.required=!!t.value,i.required=!!t.value}}const i=document.querySelector("#selected_emoney_select");if(i&&i.required!==!0){const n=document.querySelector("#emoney_account_name_input"),t=document.querySelector("#emoney_account_number_input");i.onchange=()=>{n.required=!!i.value,t.required=!!i.value}}const f=document.querySelector(".register_message");f&&registerPopup({content:f.innerText})}});
$(()=>{const n=document.querySelector("#request_registration_otp_button");if(n){const i=document.querySelector("#registration_otp_type_select"),t=document.querySelector("#registration_otp_contact_input");n.onclick=r=>{r.preventDefault();const u=t.value.trim();if(t.classList.remove("input-validation-error"),u.length===0){t.classList.add("input-validation-error");return}n.disabled=!0;window.$.ajax({type:"POST",url:"/register/otp/request",data:JSON.stringify({username:u,channelType:i.value}),contentType:"application/json; charset=utf-8",dataType:"json",success:t=>{if(isNaN(t.expiryInSeconds)||t.expiryInSeconds<=0){n.innerText=t.message;const i=parseInt(n.dataset.intervalInSeconds)*1e3||3e4;setTimeout(()=>{n.disabled=!1,n.innerText=n.dataset.title},i);return}let i=t.expiryInSeconds+1;const u=n=>Math.floor(n/60).toString().padStart(2,"0")+":"+Math.floor(n%60).toString().padStart(2,"0"),r=function(){if(i-=1,i<0){n.disabled=!1;n.innerText=n.dataset.title;return}n.innerText=t.message+` [${u(i)}]`;setTimeout(r,1e3)};r()}})}}});