$(()=>{const n=document.getElementById("game_list"),t=()=>{n&&(n.onclick=n=>{if(n.target.className==="favourite-game-btn"){let t="";t=n.target.checked?"/game/new-favourite":"/game/remove-favourite";$.ajax({type:"POST",data:JSON.stringify({Provider:n.target.dataset.provider,GameCode:n.target.value}),url:t,contentType:"application/json; charset=utf-8",dataType:"json",success:t=>{t.errorCode!=0&&(n.target.checked=!n.target.checked,registerPopup({content:`Unable to update favourite game. ${t.message}`}))},error:()=>{n.target.checked=!n.target.checked,registerPopup({content:"Unable to update favourite game."})}})}})};t()});
$(()=>{const n=document.querySelector("#filter_categories"),t=document.querySelector("#filter_input"),i=document.querySelector("#game_list");window.initializeSlotGames=r=>{$.ajax({type:"GET",url:`/mobile/slots/games/${r.provider}`,contentType:"application/json; charset=utf-8",dataType:"json",success:u=>{const o=new Set,s=document.createDocumentFragment();u.forEach(n=>{n.categories.forEach(n=>o.add(n.name));const e=document.createElement("span");if(e.className="link-container",r.onDemoLinkClicked){const t=document.createElement("a");t.className="free-play";t.innerText=r.translations.demo;t.onclick=()=>r.onDemoLinkClicked(n.gameCode);e.appendChild(t)}const i=document.createElement("a");i.className="play-now";i.dataset.game=n.name;i.href=n.link;i.innerText=r.translations.playNow;e.appendChild(i);const h=document.createElement("img");h.src=`${r.directoryPath}${r.provider}/${n.gameImage}`;h.alt=n.name;const u=document.createElement("span");if(u.className="wrapper-container",u.appendChild(h),u.appendChild(e),n.rtpValue!==null&&isFinite(n.rtpValue)){const r=document.createElement("span");r.className="rtp-title";r.innerText="RTP";const t=document.createElement("div");t.className="rtp-progress-bar";t.style.width=n.rtpValue.toFixed(2)+"%";n.rtpValue<60&&(t.dataset.rtp="low");n.rtpValue>=60&&n.rtpValue<=80&&(t.dataset.rtp="medium");n.rtpValue>80&&(t.dataset.rtp="high");const f=document.createElement("div");f.className="rtp-progress";f.appendChild(t);const e=document.createElement("span");e.className="rtp-percentage";e.innerHTML=n.rtpValue+"%";const i=document.createElement("div");i.className="rtp-container";i.appendChild(r);i.appendChild(f);i.appendChild(e);u.appendChild(i)}const c=document.createElement("span");c.className="game-name";c.innerText=n.name;const l=document.createElement("input");l.type="radio";l.name="game-list-radio-button";const f=document.createElement("label");f.className="inner-game-item";f.appendChild(l);f.appendChild(u);f.appendChild(c);const t=document.createElement("li");if(t.className="game-item",t.dataset.game=n.name,t._categories=n.categories.filter(n=>n.seqNo>=0),n.isFavourite!==undefined&&n.isFavourite!==null){const i=document.createElement("input");i.type="checkbox";i.dataset.provider=r.provider;i.value=n.gameCode;i.id=n.gameCode;i.className="favourite-game-btn";n.isFavourite&&(i.checked=!0);const u=document.createElement("label");u.htmlFor=n.gameCode;t.appendChild(i);t.appendChild(u)}t.appendChild(f);s.appendChild(t)});i.appendChild(s);const h=document.createDocumentFragment();o.forEach(t=>{if(t==="DEFAULT"){const i=n.querySelector('[data-category=""]');i.dataset.category=t;return}const i=document.createElement("div");i.className="category-filter-link";i.dataset.category=t;i.innerText=t;h.appendChild(i)});n.appendChild(h);const l=i.querySelectorAll(".game-item"),f={name:null,category:null},c=()=>{Array.prototype.slice.call(l).forEach(n=>{const i=n.dataset.game.toLowerCase(),t=n._categories.find(n=>n.name===f.category),r=!f.category||t!==undefined,u=!f.name||i.indexOf(f.name)>=0;r&&u?(n.style.order=t&&t.seqNo||0,$(n).show()):(n.style.order=0,$(n).hide())})};$(t).keyup(function(){f.name=t.value.toLowerCase();c()});$(n).on("click",".category-filter-link",function(){const n=$(this);n.siblings().removeClass("active");n.addClass("active");f.category=this.dataset.category;c()});const e=n.querySelector(".active");e&&e.dataset.category!==""&&e.click()}})}});